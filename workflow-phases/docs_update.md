# Docs Update フェーズ

## 目的

実装完了後、関連ドキュメントを最新の状態に更新する。

## 入力

- タスクディレクトリ: `{workflowDir}`
- 実装済みコード
- 仕様書: `docs/specs/`
- 設計図: `*.mmd`

## 実行手順

1. **README.md の更新**

   - 新機能・変更点を反映
   - 使用方法の更新
   - 設定項目の追加

2. **API仕様書の更新**

   - エンドポイントの追加・変更を反映
   - リクエスト・レスポンス例の更新
   - エラーコードの追加

3. **仕様書と実装の整合性確認**

   - `@spec` コメントで参照される仕様書を確認
   - 実装と仕様書の乖離がないか検証
   - 必要に応じて仕様書を修正

4. **CHANGELOG.md への追記**

   ```markdown
   ## [Unreleased]

   ### Added

   - 新機能の説明

   ### Changed

   - 変更点の説明

   ### Fixed

   - 修正点の説明
   ```

5. **設計図と実装の整合性確認**

   - ステートマシン図 (`*.state-machine.mmd`) が実装と一致しているか
   - フローチャート (`*.flowchart.mmd`) が実装と一致しているか
   - 不一致があれば図を更新

6. **コメント・JSDoc の更新**
   - 関数・メソッドの説明が最新か
   - パラメータ・戻り値の型が正しいか
   - 使用例が正確か

## チェックリスト

### README.md

- [ ] 新機能・変更点が記載されている
- [ ] 使用方法が正確である
- [ ] 設定項目が最新である

### API仕様書

- [ ] 全エンドポイントが記載されている
- [ ] リクエスト・レスポンス例が正確である
- [ ] エラーコードが網羅されている

### 仕様書

- [ ] 実装と仕様書が一致している
- [ ] `@related-files` が最新である
- [ ] テスト要件が更新されている

### CHANGELOG.md

- [ ] 変更内容が追記されている
- [ ] 適切なカテゴリ（Added/Changed/Fixed）に分類されている
- [ ] 日付・バージョンが正しい

### 設計図

- [ ] ステートマシン図が実装と一致している
- [ ] フローチャートが実装と一致している
- [ ] 状態遷移が網羅されている

### コメント・JSDoc

- [ ] 公開関数に JSDoc がある
- [ ] パラメータの説明が正確である
- [ ] 戻り値の説明が正確である

## log.md への記録

```markdown
### DOCS_UPDATE（ドキュメント更新）

- 更新したドキュメント:
  - README.md: [更新内容]
  - docs/specs/xxx.md: [更新内容]
  - CHANGELOG.md: [追記内容]
- 設計図の更新:
  - xxx.state-machine.mmd: [更新内容 or 変更なし]
  - xxx.flowchart.mmd: [更新内容 or 変更なし]
- 仕様書との乖離:
  - [乖離があれば記載]
```

## 成果物

- 更新された README.md
- 更新された API 仕様書
- 更新された仕様書
- 追記された CHANGELOG.md
- 更新された設計図（必要な場合）

## 禁止事項

- ドキュメントを更新せずに次に進む
- 仕様書と実装の乖離を放置する
- CHANGELOG.md への追記を忘れる
- 設計図と実装の不一致を放置する

## 完了条件

- [ ] 全ての関連ドキュメントが最新
- [ ] 実装とドキュメントに乖離がない
- [ ] CHANGELOG.md に変更内容を追記した
- [ ] 設計図が実装と一致している
- [ ] log.md に記録した
